# 피드백 개선 기능 제안서

> 작성일: 2024-12-17
> 목적: 트리코틸로매니아(발모벽) 습관 교정을 위한 피드백 시스템 개선

---

## 현재 시스템 분석

### 기존 피드백 메커니즘

| 구분 | 기능 | 파일 위치 |
|------|------|----------|
| 실시간 상태 | 색상 표시기 (초록/노랑/빨강/회색) | `ui/main_window.py` |
| 진행 표시 | 알림까지 남은 시간 프로그레스 바 | `ui/main_window.py` |
| 비디오 오버레이 | 상태 텍스트 및 거리 표시 | `ui/main_window.py` |
| 알림 팝업 | 2초간 빨간색 경고 팝업 | `ui/main_window.py` |
| 소리 알림 | alert.wav 또는 시스템 비프음 | `utils/alerts.py` |
| 통계 | 일별/주별/시간대별 터치 횟수 | `utils/statistics.py` |
| 캘린더 | 월별 터치 현황 시각화 | `ui/statistics_window.py` |
| 스트릭 | 연속 터치-프리 일수 추적 | `utils/statistics.py` |

---

## 제안 기능 목록

### 1. 긍정적 강화 피드백 (Positive Reinforcement)

**개요**: 경고 중심에서 격려 중심으로 피드백 전환

**세부 기능**:
- 일정 시간(예: 30분) 터치 없을 때 격려 메시지 표시
- 스트릭 달성 시 축하 알림 (1일, 7일, 30일 등)
- 일일 목표 달성 시 시각적 보상
- "오늘 터치 횟수가 어제보다 30% 감소했어요!" 같은 비교 메시지

**구현 고려사항**:
- 알림 빈도 조절 (너무 잦으면 피로감)
- 다국어 격려 메시지 추가 필요
- 설정에서 on/off 옵션 제공

**우선순위**: 🔴 높음
**예상 복잡도**: 낮음

---

### 2. 대체 행동 제안 (Alternative Action Prompts)

**개요**: 알림 시 구체적인 대체 행동을 제안하여 충동 전환 유도

**세부 기능**:
- 알림 팝업에 대체 행동 텍스트 추가
- 랜덤 또는 순차적으로 다양한 제안 표시
- 사용자 정의 대체 행동 추가 기능

**제안 행동 예시**:
- "손을 무릎 위에 올려두세요"
- "주먹을 쥐었다 천천히 펴보세요"
- "손가락을 깍지 끼어보세요"
- "스트레스 볼을 쥐어보세요"
- "손으로 책상을 가볍게 두드려보세요"
- "두 손을 깍지 끼고 스트레칭 해보세요"

**구현 고려사항**:
- 다국어 지원 필요
- 사용자가 효과적인 행동을 선택/저장할 수 있는 기능

**우선순위**: 🔴 높음
**예상 복잡도**: 낮음

---

### 3. 목표 설정 및 달성 시스템 (Goal Setting)

**개요**: 명확한 목표 설정으로 동기부여 강화

**세부 기능**:
- 일일/주간 목표 설정 (예: "오늘 터치 5회 이하")
- 목표 달성률 시각화
- 점진적 목표 감소 제안 (자동 또는 수동)
- 목표 달성 시 배지/업적 시스템
- 목표 미달성 시에도 긍정적 피드백 ("어제보다 개선되었어요")

**구현 고려사항**:
- 설정 파일에 목표 저장 (`config.json`)
- 통계 창에 목표 대비 현황 표시
- 비현실적 목표 설정 방지 (최소값 가이드)

**우선순위**: 🔴 높음
**예상 복잡도**: 중간

---

### 4. 점진적 알림 시스템 (Progressive Alerts)

**개요**: 단계별로 강도가 증가하는 알림으로 자연스러운 피드백

**세부 기능**:
- **1단계 (접근 감지)**: 부드러운 시각적 힌트 (화면 테두리 살짝 노란색)
- **2단계 (지속 접근)**: 중간 강도 알림 (소리 + 오버레이)
- **3단계 (임계값 도달)**: 현재 수준의 강한 알림

**구현 고려사항**:
- 기존 상태 머신(IDLE→DETECTING→ALERT) 확장
- 각 단계별 시간 간격 설정
- 사용자별 민감도에 따른 단계 조절

**우선순위**: 🟡 중간
**예상 복잡도**: 중간

---

### 5. 세션 요약 (Session Summary)

**개요**: 앱 사용 세션 종료 시 요약 정보 제공

**세부 기능**:
- 세션 시작/종료 시간
- 총 터치 횟수
- 평균 지속 시간
- 이전 세션 대비 변화율
- 가장 많이 터치한 시간대

**표시 시점**:
- 앱 종료 시 팝업 (선택적)
- 시스템 트레이로 최소화 시
- 일정 시간(예: 2시간)마다 알림

**구현 고려사항**:
- 세션 데이터 임시 저장 구조 필요
- 요약 팝업 UI 디자인

**우선순위**: 🟡 중간
**예상 복잡도**: 중간

---

### 6. 트리거 분석 및 인사이트 (Trigger Analysis)

**개요**: 데이터 기반 패턴 분석으로 예방적 피드백 제공

**세부 기능**:
- **시간대별 위험도 예측**: "14:00-16:00에 터치가 가장 많습니다"
- **요일별 패턴**: "월요일에 터치가 30% 더 많습니다"
- **추세 분석**: "지난 주 대비 터치가 감소하고 있습니다"
- **고위험 시간대 사전 알림**: "곧 터치가 많은 시간대입니다. 주의하세요"

**구현 고려사항**:
- 충분한 데이터 축적 후 분석 가능 (최소 7일)
- 통계 창에 인사이트 섹션 추가
- 알림 시스템과 연동

**우선순위**: 🟡 중간
**예상 복잡도**: 높음

---

### 7. 호흡/이완 가이드 (Breathing Guide)

**개요**: 알림 발생 시 즉각적인 이완 기법 안내

**세부 기능**:
- 4-7-8 호흡법 애니메이션 가이드
- 박스 호흡법 (4-4-4-4)
- 간단한 손 스트레칭 가이드
- 마음챙김 짧은 안내 (30초)

**구현 고려사항**:
- 애니메이션 UI 구현 필요
- 호흡 가이드 팝업 창 별도 구현
- 사용자 선호 기법 저장

**우선순위**: 🟢 낮음
**예상 복잡도**: 높음

---

### 8. 마음챙김 알림 (Mindfulness Reminders)

**개요**: 정기적인 자기 인식 체크 알림

**세부 기능**:
- 설정된 간격으로 "지금 손이 어디에 있나요?" 알림
- 자세 체크 리마인더
- 짧은 마음챙김 프롬프트

**구현 고려사항**:
- 알림 간격 사용자 설정
- 터치 감지와 별개의 타이머 기반 시스템
- 방해가 되지 않는 부드러운 알림 방식

**우선순위**: 🟢 낮음
**예상 복잡도**: 낮음

---

### 9. 주간/월간 리포트 (Periodic Reports)

**개요**: 정기적인 진행 상황 리포트 제공

**세부 기능**:
- 주간 요약 리포트 (매주 일요일)
- 월간 진행 리포트
- 그래프 및 차트 포함
- PDF/이미지 내보내기 기능

**구현 고려사항**:
- 리포트 생성 로직
- 내보내기 형식 (PDF, PNG)
- 이메일 발송 (선택적, 추후)

**우선순위**: 🟢 낮음
**예상 복잡도**: 높음

---

### 10. 웨어러블 기기 연동 (Wearable Integration)

**개요**: 스마트워치 등 웨어러블 기기를 통한 즉각적 피드백

**세부 기능**:
- 스마트워치 진동 알림
- 모바일 앱 연동
- 화면을 보지 않을 때도 피드백 수신

**구현 고려사항**:
- 외부 API/SDK 의존성
- 플랫폼별 구현 (Android Wear, Apple Watch)
- 별도 모바일 앱 개발 필요

**우선순위**: 🟢 낮음
**예상 복잡도**: 매우 높음

---

### 11. 커뮤니티/공유 기능 (Community Features)

**개요**: 같은 목표를 가진 사용자들과 연결

**세부 기능**:
- 익명 진행 상황 공유
- 그룹 챌린지 참여
- 격려 메시지 주고받기
- 리더보드 (선택적 참여)

**구현 고려사항**:
- 서버 인프라 필요
- 개인정보 보호
- 커뮤니티 관리

**우선순위**: 🟢 낮음
**예상 복잡도**: 매우 높음

---

## 구현 로드맵 제안

### Phase 1: 기본 피드백 강화 (단기)
1. ✅ 긍정적 강화 피드백
2. ✅ 대체 행동 제안
3. ✅ 목표 설정 시스템

### Phase 2: 스마트 피드백 (중기)
4. 점진적 알림 시스템
5. 세션 요약
6. 트리거 분석 및 인사이트

### Phase 3: 고급 기능 (장기)
7. 호흡/이완 가이드
8. 마음챙김 알림
9. 주간/월간 리포트

### Phase 4: 확장 기능 (미래)
10. 웨어러블 연동
11. 커뮤니티 기능

---

## 기술적 고려사항

### 설정 확장
```python
# config.json 확장 예시
{
    "feedback": {
        "positive_reinforcement_enabled": true,
        "positive_interval_minutes": 30,
        "alternative_actions_enabled": true,
        "custom_actions": [],
        "progressive_alerts_enabled": false
    },
    "goals": {
        "daily_target": 10,
        "weekly_target": 50,
        "auto_adjust": true
    },
    "reports": {
        "session_summary_enabled": true,
        "weekly_report_enabled": false
    }
}
```

### 다국어 지원
모든 새로운 메시지는 `locales/*.json`에 번역 추가 필요:
- 격려 메시지
- 대체 행동 제안
- 인사이트 텍스트
- 리포트 내용

### 데이터베이스 확장
필요 시 `statistics.db`에 새 테이블 추가:
- `goals`: 목표 설정 및 달성 기록
- `sessions`: 세션별 요약 데이터
- `achievements`: 배지/업적 달성 기록

---

## 참고 자료

- [습관 역전 훈련 (Habit Reversal Training)](https://en.wikipedia.org/wiki/Habit_reversal_training)
- [트리코틸로매니아 치료 가이드라인](https://www.trich.org/)
- [행동 변화를 위한 긍정적 강화](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2846575/)

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2024-12-17 | 1.0 | 최초 작성 |
